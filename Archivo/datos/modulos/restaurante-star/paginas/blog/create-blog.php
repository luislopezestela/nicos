<style type="text/css">
body{background-color:#F0F2FD;}
.wow_form_fields {
  position:relative;
  margin:15px 0;
  font-family:Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif;
}
.wow_form_fields > label{
	max-width: 100%;
  margin-bottom: 5px;
  margin-top: 7px;
  font-weight:bold;
  font-size:14.5px;
  display:block;
  color:#777;
}
.wow_form_fields input, .wow_form_fields select{
  height:44px;
}
.wow_form_fields input, .wow_form_fields textarea, .wow_form_fields select{
  background-color: transparent;
  box-shadow: rgba(60, 66, 87, 0.16) 0px 0px 0px 1px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0.12) 0px 1px 1px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px;
  border-radius:0;
  font-family: inherit;
  transition:background-color 240ms, box-shadow 240ms;
  color:#393d4a;
  font-weight:400;
  font-size:16px;
  line-height:28px;
  padding:8px;
  width:100%;
  border:0;
  outline:0;
}
.wow_form_fields input:focus, .wow_form_fields textarea:focus, .wow_form_fields select:focus{
  box-shadow: rgba(60, 66, 87, 0.16) 0px 0px 0px 1px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0.12) 0px 1px 1px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(58, 151, 212, 0.28) 0px 0px 0px 4px, rgba(0, 0, 0, 0) 0px 0px 0px 0px;
}
.wow_form_fields{
  position:relative;
  margin:15px 0;
  font-family:Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif;
}
.wow_fcov_image {
  position:relative;
  width:100%;
  min-height:350px;
  background:#f7f7f7;
  border-radius:max(0px, min(8px, calc((100vw - 4px - 100%) * 9999))) / 8px;
  margin-top:10px;
}
.wow_fcov_image > div{
  width:100%;
  height:100%;
  border-radius:max(0px, min(8px, calc((100vw - 4px - 100%) * 9999))) / 8px;
}
.wow_fcov_image img{
	vertical-align:middle;
  width:100%;
  height:100%;
  min-height:350px;
  max-height:350px;
  object-fit:cover;
  border-radius:max(0px, min(8px, calc((100vw - 4px - 100%) * 9999))) / 8px;
}
.wow_fcov_image .upload_ad_image{
  position:absolute;
  top:0;
  right:0;bottom:0;
  left:0;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  cursor:pointer;
  background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0, 0, 0, 0.3) 100%);
  border-radius:max(0px, min(8px, calc((100vw - 4px - 100%) * 9999))) / 8px;
  padding:15px;
}
.wow_fcov_image .upload_ad_image .upload_ad_image_content{
  color:white;
  font-size:15px;
}
.wow_fcov_image .upload_ad_image .upload_ad_image_content svg{
	vertical-align:middle;
  display:block;
  margin:0 auto 8px;
  width:30px;
  height:30px;
}
.wow_form_fields .bootstrap-tagsinput{
	color:#555;
  vertical-align:middle;
  border-radius:4px;
  max-width:100%;
  line-height:22px;
  cursor:text;
  width:100%;
	display:inline-block;
  border:0;
  padding:0 8px;
  background-color: transparent;
  box-shadow:rgba(60, 66, 87, 0.16) 0px 0px 0px 1px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0.12) 0px 1px 1px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px;
  transition:background-color 240ms, box-shadow 240ms;
}
.bootstrap-tagsinput .label {
    display: inline;
    padding: 0.2em 0.6em 0.3em;
    font-size: 75%;
    color: #fff;
    border-radius: 0.25em;
}
.wow_form_fields .bootstrap-tagsinput input{box-shadow:none;width: auto;}
.bootstrap-tagsinput .tag{margin-right:2px;color:#fff;}
.bootstrap-tagsinput span{background:#444;}
.bootstrap-tagsinput .tag [data-role=remove]{margin-left:8px;cursor:pointer;}
.bootstrap-tagsinput .tag [data-role=remove]:after{content:"x";padding:0 2px;}
.text-center{
  text-align:center;
  display:flex;
  justify-content:end;
  flex-wrap:wrap;
}
.btn {
    display: inline-block;
    padding: 6px 12px;
    margin-bottom: 0;
    font-size: 14px;
    font-weight: 400;
    text-align: center;
    -ms-touch-action: manipulation;
    touch-action: manipulation;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    border: 1px solid transparent;
    border-radius: 3px;
    white-space: nowrap;
    vertical-align:middle;
}
.btn-mat {
    position: relative;
    user-select: none;
    outline: 0;
    border: none;
    -webkit-tap-highlight-color: transparent;
    text-decoration: none;
    text-align: center;
    min-width: 64px;
    line-height: 36px;
    padding: 0 16px;
    border-radius: max(0px, min(8px, calc((100vw - 4px - 100%) * 9999))) / 8px;
    transform: translate3d(0,0,0);
    transition: background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);
    font-size: 15px;
    overflow: hidden;
    font-family: Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif;
}
.btn.active, .btn:active {
    background-image: none;
    outline: 0;
    -webkit-box-shadow: inset 0 1px 3px rgba(0,0,0,.125);
    box-shadow: inset 0 1px 3px rgba(0,0,0,.125);
}
.btn-mat::before {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    background-color: currentColor;
    opacity: 0;
    transition: opacity 0.2s;
}
.btn-mat svg {
    width: 17px;
    height: 17px;
    margin: -2px 3px 0 0;
    vertical-align:middle;
}
.btn-mat::after {
    content: "";
    position: absolute;
    left: 50%;
    top: 50%;
    border-radius: 50%;
    padding: 50%;
    width: 32px;
    height: 32px;
    background-color: currentColor;
    opacity: 0;
    transform: translate(-50%, -50%) scale(1);
    transition: opacity 1s, transform 0.5s;
}
.btn-mat-raised {
    box-shadow: 0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);
}
.btn-mat-raised:active {
    box-shadow: 0 5px 5px -3px rgba(0,0,0,.2), 0 8px 10px 1px rgba(0,0,0,.14), 0 3px 14px 2px rgba(0,0,0,.12);
}
.btn-main {
    color: #ffffff;
    background-color: #20aaf7;
    border-color: #20aaf7;
}
@media (max-width: 1620px){
.wow_fcov_image,.wow_fcov_image img{min-height:300px;}
}
@media (max-width: 1400px){
.wow_fcov_image,.wow_fcov_image img{min-height:250px;}
}
@media (max-width: 1200px){
.wow_fcov_image,.wow_fcov_image img{min-height:200px;}
}
</style>

<?php echo lui_LoadPage("sidebar/left-sidebar"); ?>
<div class="columna-8">
  <div class="wow_sett_sidebar button_controle_layshane_back_settign">
    <ul class="list-unstyled" style="padding-bottom:0;">
      <li class="">
        <a class="btn btn-default" href="<?php echo lui_SeoLink('index.php?link1=my-blogs'); ?>" data-ajax="?link1=my-blogs" style="background-color:#fff;">Atras</a>
      </li>
    </ul>
  </div>
	<br>
	<div class="wo_settings_page">
		<div class="profile-lists singlecol">
			<div class="avatar-holder mt-0">
				<div class="wo_page_hdng pag_neg_padd pag_alone">
					<div class="wo_page_hdng_innr">
						<span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M17,14H19V17H22V19H19V22H17V19H14V17H17V14M20,11V8H4V11H20M13,13V14.68C12.37,15.63 12,16.77 12,18C12,19.09 12.29,20.12 12.8,21H4A2,2 0 0,1 2,19V3L3.67,4.67L5.33,3L7,4.67L8.67,3L10.33,4.67L12,3L13.67,4.67L15.33,3L17,4.67L18.67,3L20.33,4.67L22,3V13.5C20.93,12.58 19.53,12 18,12C16.77,12 15.63,12.37 14.68,13H13M11,19V13H4V19H11Z"></path></svg></span> <?php echo $wo['lang']['create_new_article'];?>
					</div>
				</div>
			</div>
			<br>
			<div class="page-margin wow_sett_content">
				<form class="form form-horizontal create-article-form" method="post" id="insert-blog" action="#">
          <div class="row" style="margin: 0 -15px">
            <div class="columna-8">
    					<div class="wow_form_fields">
    						<label for="blog_title"><?php echo $wo['lang']['title']; ?></label>
    						<input id="blog_title" name="blog_title" type="text">
    					</div>
    					<div class="wow_form_fields">
    						<label for="new-blog-desc"><?php echo $wo['lang']['description']; ?></label>
    						<textarea name="blog_description" id="new-blog-desc" rows="3"></textarea>
    					</div>
    					<div class="wow_form_fields">
    						<label for="blog"><?php echo $wo['lang']['content']; ?></label>
    						<textarea name="blog_content" id="blog" placeholder="<?php echo $wo['lang']['content'] ?>"></textarea> 
    					</div>
            </div>
					
						<div class="columna-4">
              <div class="wow_form_fields">
                <label><?php echo $wo['lang']['thumbnail'];?></label>
                <div class="wow_fcov_image" data-block="thumdrop-zone">
                  <div id="wow_fcov_img_holder">
                    <img src="<?php echo $wo['config']['theme_url'];?>/img/ad_pattern.png">
                  </div>
                  <div class="upload_ad_image" onclick="document.getElementById('thumbnail').click(); return false">
                    <div class="upload_ad_image_content">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"></path></svg> <?php echo $wo['lang']['drop_img_here'] ?> <?php echo $wo['lang']['or']; ?> <?php echo $wo['lang']['browse_to_upload']; ?>
                    </div>
                  </div>
                </div>
              </div>

							<div class="wow_form_fields">
								<label for="blog_category"><?php echo $wo['lang']['category'] ?></label>
								<select name="blog_category" id="blog_category">
									<option value="0"><?php echo $wo['lang']['category'];?></option>
									<?php foreach ($wo['blog_categories'] as $category_id => $category_name): ?>
										<option value="<?php echo $category_id?>"><?php echo $category_name; ?></option>
									<?php endforeach; ?>
								</select>
							</div>
						
							<div class="wow_form_fields">
								<label for="blog_tags"><?php echo $wo['lang']['tags']; ?></label>
								<input data-role="tagsinput" id="blog_tags" name="blog_tags" type="text" placeholder="<?php echo $wo['lang']['tags']; ?>">
							</div>
						
  						<?php if($wo['config']['reCaptcha'] == 1) {?>
  							<div class="columna-6">
  								<div class="wow_form_fields">
  									<div class="form-group" style="margin-top:10px;">
  										<div class="g-recaptcha" data-sitekey="<?php echo $wo['config']['reCaptchaKey']?>"></div>
  									</div>
  								</div>
  							</div>
  						<?php } ?>
              <div class="setting-update-alert" id="blog-alert"></div>
              <div class="wow_form_fields">
                <div class="publisher-hidden-option">
                  <div id="progress">
                    <div class="progress">
                      <span id="percent">0%</span>
                      <div id="bar" class="progress-bar progress-bar-striped active"></div> 
                    </div>
                    <div class="clear"></div>
                  </div>
                  <div id="status"></div>
                </div>
              </div>

              <div class="text-center">
                <a class="btn btn-mat" data-ajax="?link1=my-blogs" href="<?php echo lui_SeoLink('index.php?link1=my-blogs');?>">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path></svg> <?php echo $wo['lang']['go_back'];?>
                </a>
                <button class="btn btn-main btn-mat btn-mat-raised add_wow_loader" type="submit"><?php echo $wo['lang']['publish']; ?></button>
              </div>
            </div>
          </div>

					<input type="file" class="hidden" id="thumbnail" name="thumbnail" accept="image/*">
					<input type="hidden" name="hash_id" value="<?php echo lui_CreateSession();?>">
					<input name="image" type="file" id="upload" class="hidden">
				</form>
			</div>
		</div>
	</div>
	<!-- .row -->
</div>
<script>
  jQuery(document).ready(function($) {
    
    var thumb_drop_block = $("[data-block='thumdrop-zone']");
    if (typeof(window.FileReader) == 'undefined') {
      thumb_drop_block.find('.thumbnail-rendderer div').text('¡La función de arrastrar y soltar no es compatible con tu navegador!');
    }else{
      thumb_drop_block[0].ondragover = function() {
          thumb_drop_block.addClass('hover');
          return false;
      };
          
      thumb_drop_block[0].ondragleave = function() {
          thumb_drop_block.removeClass('hover');
          return false;
      };

      thumb_drop_block[0].ondrop = function(event) {
          event.preventDefault();
          thumb_drop_block.removeClass('hover');
          var file = event.dataTransfer.files;
          $("#thumbnail").prop('files', file);
          $("#wow_fcov_img_holder").html("<img src='" + window.URL.createObjectURL(event.dataTransfer.files[0]) + "' alt='Picture'>")
      };
    }

    $("#blog_tags").tagsinput({
      maxTags: 15,
    });

    $("#thumbnail").change(function(event) {
      $("#wow_fcov_img_holder").html("<img src='" + window.URL.createObjectURL(this.files[0]) + "' alt='Picture'>")
    });

    var bar = $('#bar');
    var percent = $('#percent');
    var status = $('#status');
    $('#insert-blog').ajaxForm({
      url: Wo_Ajax_Requests_File() + '?f=insert-blog',
      beforeSend: function() {
      	var percentVal = '0%';
        bar.width(percentVal);
        percent.html(percentVal);
        $('#insert-blog').find('.add_wow_loader').addClass('btn-loading');
      },
      uploadProgress: function (event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal);
        if(percentComplete > 50){
          percent.addClass('white');
        }
        percent.html(percentVal);
      },
      success: function(data) {
        if (data['status'] == 200) {
          $("#blog-alert").html('<div class="alert alert-success">'+ data['message'] +'</div>');
          window.location = data.url;
        } else if (data['status'] == 300) {
          $("#approve_post").modal('show');
          Wo_Delay(function(){
            $("#approve_post").modal('hide');
            location.reload();
          },3000);
        } else if (data['message']) {
          $("#blog-alert").html('<div class="alert alert-danger">' + data['message'] + '</div>');
        } 
        $('#insert-blog').find('.add_wow_loader').removeClass('btn-loading');
      }
    });
 });

tinymce.init({
  selector: '#blog',
  height: 470,
  images_upload_credentials: true,
  paste_data_images: true,
  image_advtab: true,
  entity_encoding : "raw",
  images_upload_url: Wo_Ajax_Requests_File() + '?f=upload-blog-image',
  toolbar1: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
  toolbar2: "print preview media | forecolor backcolor emoticons",
  plugins: [
      "advlist autolink lists link image charmap print preview hr anchor pagebreak",
      "searchreplace wordcount visualblocks visualchars code fullscreen",
      "insertdatetime media nonbreaking save table contextmenu directionality",
      "emoticons template paste textcolor colorpicker textpattern"
    ],
    file_picker_callback: function(callback, value, meta) {
      if (meta.filetype == 'image') {
        $('#upload').trigger('click');
        $('#upload').on('change', function() {
          var file = this.files[0];
          var reader = new FileReader();
          reader.onload = function(e) {
            callback(e.target.result, {
              alt: ''
            });
          };
          reader.readAsDataURL(file);
        });
      }
    },
});
recpoll()
</script> 